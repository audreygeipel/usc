CC = g++
LDFLAGS = -lxnet -lnsl -lsocket
CFLAGS = -g -Wall

# Set the directory structure
OBJ_FOLDER = obj/
SRC_FOLDER = src/
HDR_FOLDER = src/

# File name for zip target
ZIP_NAME = ee450_obilgic_session1.tar

# File name for executable
APP_NAME = army

# Main target that compiles the all application
$(APP_NAME) : $(OBJ_FOLDER)main.o $(OBJ_FOLDER)Captain.o $(OBJ_FOLDER)Major.o $(OBJ_FOLDER)General.o
	@echo "Linking object files:" $@
	$(CC) $(LDFLAGS) -o $@ $^

$(OBJ_FOLDER)%.o : $(SRC_FOLDER)%.cpp $(HDR_FOLDER)%.h
	@echo "Compiling:" $@
	$(CC) $(CFLAGS) -c -o $@ $<

# Target for creating zip file that is needed for hw submission
zip: clean
	@echo "Archiving the source code for submission"
	tar cvf $(ZIP_NAME) *
	gzip $(ZIP_NAME)

# Deletes all the files generated by the make tool
clean:
	@echo "Cleaning all auto-generated files"
	rm -f $(APP_NAME)
	rm -f $(OBJ_FOLDER)*
	rm -f $(ZIP_NAME).gz
	rm -f *~
